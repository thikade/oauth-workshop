<!DOCTYPE html>
<html>
<head>
    <title>Devjourfix Special</title>
    <link crossorigin="anonymous" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
          integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" rel="stylesheet">
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
</head>
<body>
<div class="container">
    <h2>Task 3</h2>

    <table class="table">
        <tr>
            <td>refresh token</td>
            <td><code id="task3r"/></td>
        </tr>
        <tr>
            <td>request</td>
            <td><code id="task3cr"></code></td>
        </tr>

        <tr>
            <td>access_token</td>
            <td><code id="task3a"/></td>
        </tr>

        <tr>
            <td>next level</td>
            <td><code id="result"></code></td>
        </tr>

    </table>
    <script>

        let refresh = "eyJjdHkiOiJKV1QiLCJlbmMiOiJBMjU2R0NNIiwiYWxnIjoiUlNBLU9BRVAifQ.O3IoQ7hJUK2NrhyDVxE2HjruwErsj9Qhmw3J4QhaIJ4BRf_NS834T5FnILopbAMhJNyivLJpY643OtDK820R7SAPMDRWUVNCKKYW_Vy7lGLfLRG4jauKh6ThcjqZn9sqrAI480uP6HoFR891NjsNFtDkWAoettRE2-PdbS2IP_dNdzLYSJItgL4ftGEiFhsP287sADKLEOsS8q_mIUjhNBZc7F2_S3mSwpiOvYUB2NvOd8y-GE59AUAV6yQOT3NmZqhVxi6pV9xMrGKkg85Xs9VXqgAPlaHtTyOGj7l8ah5DRKu2_giT3p-t6ULgHjZ4ZQtPD_RfmToGtiy-O13X_A.sFMYOqgu_ZYAiq0R.cL9QMjddRjWnt_8kPT3ilLE9pE6ms7T8DgV9rURq_5vtlYF_cbwJzmk1_Av88RJKNJoGJAaI0Tv8WVprcyMY75oEZiIx-zoUqeR3qU3ZaMuixn5uHzT8ik7KzR4Exnl-TTHFgb0n3ymFldHs9ItoAIaOyheuAt0yg8X-Pkpju8-qfHn13B4YvHE8tOjAcpN4MFfmwqLbMu_CBTn4hGubWCsjQDriVUk0BaaUaRzO1LgpKZLGXSfxddJ5MWQh6eOKuqqj0Nib5Ib8-ryBEFmPdrmDbpCS6BAr1VAtgD1NahZfeWICxC_QmOabkL1stShTCnPE_JoRWSAC5zWjzYyj_U-069ox6q28MtMelIBMpDXoKRrgfCctSsFMhn8r9gx0bjINSoTP9DL9-6aogc2ZOJeS4haAV0_RcNfV5KpVk3HJGNojOK5f4KIbji1I7GB7-E2gvO2owxQ5-fWO4JcqUAqMdvF9QrMcU-joEmFou_CdYxikS2Qqw0xqAKyoNcPbYXsSgay8VMI2MjVjbnmr6jolUu7cDNh8LW0D8wEPqD8_lWqBXTJN5ObfbWOQweRgoLVY8iP4L1BaD7P6K4iOCWuzDeoibHQRTl0XLzZmxnEooQBEV5gyfTkG33HtENDBDzQteBNpCPwLNMTIJhUEclHTJmjMxjVICneBMTUADMQmQQbzUdDwgCI92g-WSjlSpm0V654HfA4zixVpEWpHaCE-POhbhJCoOgNoZ7r8F9ItZ7sbdTqR2FVCEdjmFrvhY_JewX87cDVOrJfpUFeUkkC4OJGdSugMYF-d4gOg_Mmjva0S2UwUmkQfvoFDYCAdZk9bVP6FomLRms-Qdhso4WUJVcwaoq_MbPuWr_O_HI3VU9oys5eIG421mTruhzuyrZwryvDD00znCmyowGIMdXur62R8ZPpx8bxiRiuvaU-JlmAhAZjTPFTHiFnxz2HAgZMOX1gknW6KAwG9oayBXXFoDRBzs6FmlReeFFsgdkSon1gWbaYijsfTnCgBJ2BAAU3NdUmo646dz9m-7GUSaBW_no3p4nMequ6ZwTySQlCVKWnO0wXELAyP9ZJUs28FKMrl6Yil3nfznSUcTNQmxx1WXdTqV7Dj6elHj11pk8ICMhAGm5yyShdCkdxPc0KYzkrovH5mqzYuckEs7gNF-_ZTCj3orM0bxlEivB63-sLQv19mTDa2-xbYPMUWVBY51SEeBKeQO7qqlevaXoCegaAL_mCkWlmov5Q43m-w5Llfau4WiuZwjXkMKBIKblGNw0u4AnSM7GJ6wqeRu1R_xPXLN4pWm9emT1xaua6My_oOelLLieWOAGDGFb0wgd2ZnpWaqU4iDy5p.CzQpABDO1vme9iCUipS6Ww";
        window.document.getElementById('task3r').innerText = refresh;
        window.document.getElementById('task3cr').innerText = "curl 'https://devjourfix-willhaben-test.auth.eu-central-1.amazoncognito.com/oauth2/token' -H 'Authorization: Basic NXZra25pc2VkczRpMXM0cHN0MHVvZTI4MHU6MXIxbGtxZWE1dHVoNHNjbTdsa2Q0Mm1jbDMycGdyYnBraW01Z3ZzcDZidmduZTdlNTVmNw==' -H 'Content-Type: application/x-www-form-urlencoded' "+
            "--data 'grant_type=refresh_token&client_id=5vkkniseds4i1s4pst0uoe280u&refresh_token="+refresh+"'"

        fetch('https://devjourfix-willhaben-test.auth.eu-central-1.amazoncognito.com/oauth2/token', {
            body: 'grant_type=refresh_token&client_id=5vkkniseds4i1s4pst0uoe280u&refresh_token='+refresh,
            headers: {
                'Content-Type': 'application/x-www-form-urlencoded',
                'Authorization': 'Basic NXZra25pc2VkczRpMXM0cHN0MHVvZTI4MHU6MXIxbGtxZWE1dHVoNHNjbTdsa2Q0Mm1jbDMycGdyYnBraW01Z3ZzcDZidmduZTdlNTVmNw=='
            },
            method: 'post',
        })
            .then(response => response.json())
            .then(result => {
                window.document.getElementById('task3a').innerText = result.access_token
                window.document.getElementById('result').innerText = "curl 'https://5ddwj6qy0l.execute-api.eu-central-1.amazonaws.com/prod/task3' -H 'Authorization: Bearer "+result.access_token+"'"

            })


    </script>
</div>
</body>

</html>
